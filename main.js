!function(){"use strict";var e=class{constructor(e,t){let{data:s,handleImageClick:n,handleLikeClick:r,handleDeleteCardClick:i}=e;this._name=s.name,this._link=s.link,this._id=s._id,this._isLiked=s.isLiked,this._cardSelector=t,this._handleImageClick=n,this._handleLikeClick=r,this._handleDeleteCardClick=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getId(){return this._id}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._cardDelete.addEventListener("click",(()=>{this._handleDeleteCardClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeButton(){this._isLiked?this._likeButton.classList.add("card__button_active"):this._likeButton.classList.remove("card__button_active")}handleLike(e){this._isLiked=e,this._handleLikeButton()}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this._getTemplate(),this._likeButton=this._cardElement.querySelector(".card__button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardButton=this._cardElement.querySelector(".card__button"),this._cardDelete=this._cardElement.querySelector(".card__delete_button"),this._cardElement.querySelector(".card__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._handleLikeButton(),this._setEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}disabledButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}enabledButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?this.disabledButton():this.enabledButton()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target===this._popupElement&&this.close()}))}}class n extends s{constructor(e,t){let{popupSelector:s}=e;super({popupSelector:s}),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__input"),this._saveButton=this._form.querySelector(".modal__button"),this._saveButtonText=this._saveButton.textContent}setSubmitHandler(e){this._handleFormSubmit=e}_getInputValues(){return this._inputData={},this._inputList.forEach((e=>{this._inputData[e.name]=e.value})),this._inputData}modalSaving(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._saveButton.textContent=e?t:this._saveButtonText}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this._form.reset()})),super.setEventListeners()}}const r={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"};document.querySelector(".gallery__cards");const i=document.querySelector("#profile-edit-modal"),o=(document.forms["profile-edit-form"],document.querySelector("#add-card-modal"),document.forms["add-card-form"]),a=(document.forms["change-avatar-form"],document.querySelector("#profile-edit-button")),l=document.querySelector(".profile__name-text"),c=document.querySelector(".profile__description"),d=document.querySelector("#profile-add-button"),h=document.querySelector("#avatar-change-button"),u=document.querySelector(".profile__avatar"),_=i.querySelector("#owner-name"),m=i.querySelector("#owner-description"),p="#card-template",v=new class extends s{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._previewImageElement=this._popupElement.querySelector(".modal__preview_image"),this._previewImageElementTitle=this._popupElement.querySelector(".modal__preview_title")}open(e){this._previewImageElement.src=e.link,this._previewImageElement.alt=e.name,this._previewImageElementTitle.textContent=e.name,super.open()}}({popupSelector:"#image-preview-modal"});v.setEventListeners();const E=new n({popupSelector:"#add-card-modal"},(function(e){const t={name:e.title,link:e.url};E.modalSaving(!0),C.addCard(t).then((e=>{const t=L(e);y.addItem(t),console.log(t),E.close(),o.reset()})).catch((e=>{console.error(e)})).finally((()=>{E.modalSaving(!1)}))}));E.setEventListeners();const S=new n({popupSelector:"#profile-edit-modal"},(function(e){const t=e.name,s=e.description;S.modalSaving(!0),C.updateUserInfo({name:t,description:s}).then((()=>{f.setUserInfo({name:t,description:s}),S.close()})).catch((e=>{console.error(e)})).finally((()=>{S.modalSaving(!1)}))}));S.setEventListeners();const g=new n({popupSelector:"#change-avatar-modal"},(function(e){g.modalSaving(!0),C.changeAvatar(e.link).then((e=>{f.setUserAvatar(e.avatar),g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.modalSaving(!1)}))}));g.setEventListeners();const k=new n({popupSelector:"#confirm-delete-modal"},I);k.setEventListeners();const f=new class{constructor(e,t,s){this._descriptionElement=t,this._nameElement=e,this._avatarElement=s}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}getUserAvatar(){return{avatar:this._avatarElement.src}}setUserInfo(e){let{name:t,description:s}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=s}setUserAvatar(e){this._avatarElement.src=e}}(l,c,u),C=new class{constructor(e){let{url:t,token:s}=e;this._url=t,this._token=s}checkResponse(e){return e.ok?(console.log("Response OK!"),e.json()):(console.log("Response NOT OK!"),Promise.reject(`Error: ${e.status}`))}getInitialCards(){return fetch(`${this._url}/cards`,{headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this.checkResponse)}getUserInfo(){return fetch(`${this._url}/users/me`,{headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this.checkResponse)}getInfoAndCards(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}updateUserInfo(e){let{name:t,description:s}=e;return fetch(`${this._url}/users/me`,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:s})}).then(this.checkResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._url}/cards`,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:s})}).then(this.checkResponse)}deleteCard(e){return fetch(`${this._url}/cards/${e}`,{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this.checkResponse)}likeCardStatus(e,t){return fetch(`${this._url}/cards/${e}/likes`,{method:t?"PUT":"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then(this.checkResponse)}changeAvatar(e){return fetch(`${this._url}/users/me/avatar`,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(this.checkResponse)}}({url:"https://around-api.en.tripleten-services.com/v1",token:"180fed17-f626-4f59-8309-4b759f5f0038"});C.getInfoAndCards().then((e=>{let[t,s]=e;f.setUserInfo({name:t.name,description:t.about}),f.setUserAvatar(t.avatar),y.renderItems(s)})).catch((e=>{console.error(e)}));const y=new class{constructor(e,t){let{renderer:s}=e;this._items=[],this._renderer=s,this._container=document.querySelector(t)}renderItems(e){this._items=e,this._items.reverse().forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}({renderer:e=>{y.addItem(L(e))}},".gallery__cards");function L(t){const s=new e({data:t,handleImageClick:()=>{v.open(t)},handleLikeClick:e=>{C.likeCardStatus(e.getId(),!e._isLiked).then((t=>{e.handleLike(t.isLiked)})).catch(console.error)},handleDeleteCardClick:I},p);return s.getView()}function I(e){k.open(),k.setSubmitHandler((()=>{C.deleteCard(e._id).then((()=>{e.handleDeleteCard(),k.close()})).catch(console.error)}))}a.addEventListener("click",(()=>{const e=f.getUserInfo();_.value=e.name,m.value=e.description,S.open()})),d.addEventListener("click",(()=>{E.open(),b["add-form"].toggleButtonState()})),h.addEventListener("click",(()=>{g.open(),b["avatar-form"].toggleButtonState()}));const b={};[...document.querySelectorAll(".modal__form")].forEach((e=>{const s=new t(r,e),n=e.getAttribute("name");b[n]=s,s.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MUksbUJBQW1CLElBR2hEa0QsRUFBZ0IzRixpQkFBaUIsU0FBUyxLQUN4QzRILEVBQWtCakUsT0FDbEJ3SCxFQUFlLGVBQWUxSSxtQkFBbUIsSUFJbkQsTUFBTTBJLEVBQWlCLENBQUMsRUFFUCxJQUFJMUwsU0FBUzRDLGlCQUFpQixpQkFDdENFLFNBQVN2QixJQUNoQixNQUFNb0ssRUFBWSxJQUFJQyxFQUFjdEssRUFBVUMsR0FDeENzSyxFQUFXdEssRUFBWXVLLGFBQWEsUUFFMUNKLEVBQWVHLEdBQVlGLEVBQzNCQSxFQUFVbEksa0JBQWtCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgZGF0YSwgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVDYXJkQ2xpY2sgfSxcclxuICAgIGNhcmRTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZENsaWNrID0gaGFuZGxlRGVsZXRlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUxpa2UoaXNMaWtlZCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZV9idXR0b25cIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlZEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlZEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVkQnV0dG9uKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuZW5hYmxlZEJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvblRleHQgPSB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0SGFuZGxlcihoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0RGF0YSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0RGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXREYXRhO1xyXG4gIH1cclxuXHJcbiAgbW9kYWxTYXZpbmcoaXNTYXZpbmcsIHNhdmVUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzU2F2aW5nKSB7XHJcbiAgICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSBzYXZlVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zYXZlQnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGZvcm1WYWx1ZXMpO1xyXG4gICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcclxufTtcclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG4vKiBXcmFwcGVycyovXHJcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1lZGl0LWZvcm1cIl07XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xyXG5jb25zdCBjaGFuZ2VBdmF0YXJGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJjaGFuZ2UtYXZhdGFyLWZvcm1cIl07XHJcblxyXG4vKiBCdXR0b25zICYgb3RoZXIgRE9NIG5vZGVzICovXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZS10ZXh0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XHJcbmNvbnN0IGF2YXRhckNoYW5nZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLWNoYW5nZS1idXR0b25cIik7XHJcbmNvbnN0IGF2YXRhckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcblxyXG4vKiBGb3JtIGRhdGEgKi9cclxuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNvd25lci1uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9XHJcbiAgcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI293bmVyLWRlc2NyaXB0aW9uXCIpO1xyXG5cclxuY29uc3QgY2FyZFNlbGVjdG9ycyA9IHtcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxufTtcclxuXHJcbi8qIEZ1bmN0aW9ucyAqL1xyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIixcclxufSk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxyXG4gIH0sXHJcbiAgaGFuZGxlQWRkQ2FyZFN1Ym1pdFxyXG4pO1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICB9LFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGF2YXRhckNoYW5nZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXBTZWxlY3RvcjogXCIjY2hhbmdlLWF2YXRhci1tb2RhbFwiLFxyXG4gIH0sXHJcbiAgaGFuZGxlQ2hhbmdlQXZhdGFyU3VibWl0XHJcbik7XHJcbmF2YXRhckNoYW5nZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiLFxyXG4gIH0sXHJcbiAgaGFuZGxlRGVsZXRlQ2FyZFN1Ym1pdFxyXG4pO1xyXG5jb25maXJtRGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24sIGF2YXRhckltYWdlKTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIHVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIHRva2VuOiBcIjE4MGZlZDE3LWY2MjYtNGY1OS04MzA5LTRiNzU5ZjVmMDAzOFwiLFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbmZvQW5kQ2FyZHMoKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB1c2VyRGF0YS5uYW1lLCBkZXNjcmlwdGlvbjogdXNlckRhdGEuYWJvdXQgfSk7IC8vcmVuZGVyIHByb2ZpbGUgaW5mb1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpOyAvL3JlbmRlciBwcm9maWxlIHBpY1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0ocmVuZGVyQ2FyZChkYXRhKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuZ2FsbGVyeV9fY2FyZHNcIlxyXG4pO1xyXG5cclxuLyogRXZlbnQgSGFuZGxlcnMgKi9cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YSxcclxuICAgICAgaGFuZGxlSW1hZ2VDbGljazogKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4oZGF0YSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmQpID0+IHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5saWtlQ2FyZFN0YXR1cyhjYXJkLmdldElkKCksICFjYXJkLl9pc0xpa2VkKVxyXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5oYW5kbGVMaWtlKGRhdGEuaXNMaWtlZCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVEZWxldGVDYXJkQ2xpY2s6IGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQsXHJcbiAgICB9LFxyXG4gICAgY2FyZFNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQodXNlckRhdGEpIHtcclxuICBjb25zdCBuYW1lID0gdXNlckRhdGEubmFtZTtcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IHVzZXJEYXRhLmRlc2NyaXB0aW9uO1xyXG4gIGVkaXRQcm9maWxlUG9wdXAubW9kYWxTYXZpbmcodHJ1ZSk7XHJcblxyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVVzZXJJbmZvKHsgbmFtZTogbmFtZSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogbmFtZSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIH0pO1xyXG4gICAgICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdFByb2ZpbGVQb3B1cC5tb2RhbFNhdmluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChpbnB1dERhdGEpIHtcclxuICBjb25zdCBjYXJkRGF0YSA9IHsgbmFtZTogaW5wdXREYXRhLnRpdGxlLCBsaW5rOiBpbnB1dERhdGEudXJsIH07XHJcbiAgbmV3Q2FyZFBvcHVwLm1vZGFsU2F2aW5nKHRydWUpO1xyXG5cclxuICBhcGlcclxuICAgIC5hZGRDYXJkKGNhcmREYXRhKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gcmVuZGVyQ2FyZChyZXMpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gICAgICBjb25zb2xlLmxvZyhuZXdDYXJkKTtcclxuICAgICAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGFkZENhcmRGb3JtLnJlc2V0KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgbmV3Q2FyZFBvcHVwLm1vZGFsU2F2aW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDaGFuZ2VBdmF0YXJTdWJtaXQoYXZhdGFyVXJsKSB7XHJcbiAgYXZhdGFyQ2hhbmdlUG9wdXAubW9kYWxTYXZpbmcodHJ1ZSk7XHJcblxyXG4gIGFwaVxyXG4gICAgLmNoYW5nZUF2YXRhcihhdmF0YXJVcmwubGluaylcclxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgICAgIGF2YXRhckNoYW5nZVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYXZhdGFyQ2hhbmdlUG9wdXAubW9kYWxTYXZpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmRTdWJtaXQoY2FyZERhdGEpIHtcclxuICBjb25maXJtRGVsZXRlUG9wdXAub3BlbigpO1xyXG5cclxuICBjb25maXJtRGVsZXRlUG9wdXAuc2V0U3VibWl0SGFuZGxlcigoKSA9PiB7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZERhdGEuX2lkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZERhdGEuaGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKGNhcmREYXRhKTtcclxufVxyXG5cclxuLy8gRm9ybSBMaXN0ZW5lcnNcclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuYXZhdGFyQ2hhbmdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyQ2hhbmdlUG9wdXAub3BlbigpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiYXZhdGFyLWZvcm1cIl0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufSk7XHJcblxyXG4vKiBWYWxpZGF0aW9uICovXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBmb3JtTGlzdCA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtXCIpXTtcclxuZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xyXG4gIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuXHJcbiAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19wcmV2aWV3X2ltYWdlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50VGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3ByZXZpZXdfdGl0bGVcIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnRUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRlc2NyaXB0aW9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IG5hbWVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBhdmF0YXJTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckF2YXRhcigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVybCwgdG9rZW4gfSkge1xyXG4gICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuICB9XHJcblxyXG4gIGNoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlJlc3BvbnNlIE5PVCBPSyFcIik7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiUmVzcG9uc2UgT0shXCIpO1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxyXG5cclxuICAvL0dFVCB1c2Vycy9tZVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4odGhpcy5jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluZm9BbmRDYXJkcygpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IG5hbWUsIGFib3V0OiBkZXNjcmlwdGlvbiB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy9tZXRob2QgdG8gZGVsZXRlIGNhcmQgZnJvbSBzZXJ2ZXJcclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4odGhpcy5jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkU3RhdHVzKGNhcmRJZCwgbGlrZSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGxpa2UgPyBcIlBVVFwiIDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQXZhdGFyKGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGxpbmsgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBbXTtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsYXNzU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9pdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZENsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2FyZENsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldElkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmREZWxldGUiLCJfY2FyZEltYWdlIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJoYW5kbGVMaWtlIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsImdldFZpZXciLCJfY2FyZEJ1dHRvbiIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0Iiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsIl9lcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkQnV0dG9uIiwiZGlzYWJsZWQiLCJlbmFibGVkQnV0dG9uIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3NhdmVCdXR0b24iLCJfc2F2ZUJ1dHRvblRleHQiLCJzZXRTdWJtaXRIYW5kbGVyIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0RGF0YSIsImlucHV0IiwidmFsdWUiLCJtb2RhbFNhdmluZyIsImlzU2F2aW5nIiwic2F2ZVRleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJmb3JtVmFsdWVzIiwicmVzZXQiLCJwcm9maWxlRWRpdE1vZGFsIiwiYWRkQ2FyZEZvcm0iLCJmb3JtcyIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJhZGROZXdDYXJkQnV0dG9uIiwiYXZhdGFyQ2hhbmdlQnRuIiwiYXZhdGFySW1hZ2UiLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkU2VsZWN0b3JzIiwicG9wdXBXaXRoSW1hZ2UiLCJfcHJldmlld0ltYWdlRWxlbWVudCIsIl9wcmV2aWV3SW1hZ2VFbGVtZW50VGl0bGUiLCJuZXdDYXJkUG9wdXAiLCJpbnB1dERhdGEiLCJjYXJkRGF0YSIsInRpdGxlIiwidXJsIiwiYXBpIiwiYWRkQ2FyZCIsInRoZW4iLCJyZXMiLCJuZXdDYXJkIiwicmVuZGVyQ2FyZCIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVyciIsImVycm9yIiwiZmluYWxseSIsImVkaXRQcm9maWxlUG9wdXAiLCJ1c2VyRGF0YSIsImRlc2NyaXB0aW9uIiwidXBkYXRlVXNlckluZm8iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYXZhdGFyQ2hhbmdlUG9wdXAiLCJhdmF0YXJVcmwiLCJjaGFuZ2VBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiYXZhdGFyIiwiY29uZmlybURlbGV0ZVBvcHVwIiwiaGFuZGxlRGVsZXRlQ2FyZFN1Ym1pdCIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfbmFtZUVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImdldFVzZXJJbmZvIiwiZ2V0VXNlckF2YXRhciIsInRva2VuIiwiX3VybCIsIl90b2tlbiIsImNoZWNrUmVzcG9uc2UiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImdldEluZm9BbmRDYXJkcyIsImFsbCIsIl9yZWYyIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsIl9yZWYzIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImxpa2VDYXJkU3RhdHVzIiwibGlrZSIsImNhcmRzIiwicmVuZGVySXRlbXMiLCJjbGFzc1NlbGVjdG9yIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJyZXZlcnNlIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZCIsIkNhcmQiLCJmb3JtVmFsaWRhdG9ycyIsInZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=