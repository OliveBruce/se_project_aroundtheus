!function(){"use strict";var e=class{constructor(e,t,s){let{name:n,link:r}=e;this._name=n,this._link=r,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._cardDelete.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeButton(){this._cardButton.classList.toggle("card__button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardButton=this._cardElement.querySelector(".card__button"),this._cardDelete=this._cardElement.querySelector(".card__delete_button"),this._cardElement.querySelector(".card__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.classList.remove(this._errorClass),this._errorMessageEl.textContent=""}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}disabledButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}enabledButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?this.disabledButton():this.enabledButton()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target===this._popupElement&&this.close()}))}}class n extends s{constructor(e,t){let{popupSelector:s}=e;super({popupSelector:s}),this._handleFormSubmit=t,this._form=this._popupElement.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__input")}_getInputValues(){return this._inputData={},this._inputList.forEach((e=>{this._inputData[e.name]=e.value})),this._inputData}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this._form.reset()})),super.setEventListeners()}}const r={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},i=(document.querySelector(".gallery__cards"),document.querySelector("#profile-edit-modal")),o=(document.forms["profile-edit-form"],document.querySelector("#add-card-modal"),document.forms["add-card-form"]),a=document.querySelector("#profile-edit-button"),l=document.querySelector(".profile__name-text"),c=document.querySelector(".profile__description"),u=document.querySelector("#profile-add-button"),d=i.querySelector("#owner-name"),_=i.querySelector("#owner-description"),m=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:h},".gallery__cards");function h(t){const s=new e(t,"#card-template",p).getView();m.addItem(s)}function p(e){v.open(e)}m.renderItems();const E=new class{constructor(e,t){this._descriptionElement=t,this._nameElement=e}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._descriptionElement.textContent=t}}(l,c);a.addEventListener("click",(()=>{const e=E.getUserInfo();d.value=e.name,_.value=e.description,f.open()})),u.addEventListener("click",(()=>{S.open(),g["add-form"].toggleButtonState()}));const g={};[...document.querySelectorAll(".modal__form")].forEach((e=>{const s=new t(r,e),n=e.getAttribute("name");g[n]=s,s.enableValidation()}));const v=new class extends s{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._previewImageElement=this._popupElement.querySelector(".modal__preview_image"),this._previewImageElementTitle=this._popupElement.querySelector(".modal__preview_title")}open(e){this._previewImageElement.src=e.link,this._previewImageElement.alt=e.name,this._previewImageElementTitle.textContent=e.name,super.open()}}({popupSelector:"#image-preview-modal"});v.setEventListeners();const S=new n({popupSelector:"#add-card-modal"},(function(e){h({name:e.title,link:e.url}),S.close(),o.reset()}));S.setEventListeners();const f=new n({popupSelector:"#profile-edit-modal"},(function(e){const t=e.name,s=e.description;E.setUserInfo(t,s),f.close()}));f.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3hDTCxjQUFlLHlCQUVqQitDLEVBQWV0QyxvQkFFZixNQUFNaUQsRUFBZSxJQUFJL0MsRUFDdkIsQ0FDRVgsY0FBZSxvQkE5Q25CLFNBQTZCa0UsR0FHM0J4QixFQUZpQixDQUFFN0csS0FBTXFJLEVBQVVDLE1BQU9ySSxLQUFNb0ksRUFBVUUsTUFHMURWLEVBQWFwRCxRQUNiZ0IsRUFBWUYsT0FDZCxJQTRDQXNDLEVBQWFqRCxvQkFFYixNQUFNZ0QsRUFBbUIsSUFBSTlDLEVBQzNCLENBQ0VYLGNBQWUsd0JBN0RuQixTQUFpQ3dELEdBQy9CLE1BQU0zSCxFQUFPMkgsRUFBUzNILEtBQ2hCeUgsRUFBY0UsRUFBU0YsWUFDN0JOLEVBQVNPLFlBQVkxSCxFQUFNeUgsR0FDM0JHLEVBQWlCbkQsT0FDbkIsSUE0REFtRCxFQUFpQmhELG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlX2J1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVkQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBlbmFibGVkQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZWRCdXR0b24oKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5lbmFibGVkQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9LCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dERhdGEgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dERhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RGF0YTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGZvcm1WYWx1ZXMpO1xyXG4gICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcclxufTtcclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vKiBXcmFwcGVycyovXHJcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1lZGl0LWZvcm1cIl07XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xyXG5cclxuLyogQnV0dG9ucyAmIG90aGVyIERPTSBub2RlcyAqL1xyXG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWUtdGV4dFwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xyXG5cclxuLyogRm9ybSBkYXRhICovXHJcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjb3duZXItbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPVxyXG4gIHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNvd25lci1kZXNjcmlwdGlvblwiKTtcclxuXHJcbi8qIEZ1bmN0aW9ucyAqL1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXHJcbiAgfSxcclxuICBcIi5nYWxsZXJ5X19jYXJkc1wiXHJcbik7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLyogRXZlbnQgSGFuZGxlcnMgKi9cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoZGF0YSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQodXNlckRhdGEpIHtcclxuICBjb25zdCBuYW1lID0gdXNlckRhdGEubmFtZTtcclxuICBjb25zdCBkZXNjcmlwdGlvbiA9IHVzZXJEYXRhLmRlc2NyaXB0aW9uO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoaW5wdXREYXRhKSB7XHJcbiAgY29uc3QgY2FyZERhdGEgPSB7IG5hbWU6IGlucHV0RGF0YS50aXRsZSwgbGluazogaW5wdXREYXRhLnVybCB9O1xyXG5cclxuICByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxuICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxuICBhZGRDYXJkRm9ybS5yZXNldCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihjYXJkRGF0YSk7XHJcbn1cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24pO1xyXG5cclxuLy8gRm9ybSBMaXN0ZW5lcnNcclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1mb3JtXCJdLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLyogVmFsaWRhdGlvbiAqL1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuY29uc3QgZm9ybUxpc3QgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybVwiKV07XHJcbmZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcclxuICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNpbWFnZS1wcmV2aWV3LW1vZGFsXCIsXHJcbn0pO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXBTZWxlY3RvcjogXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICB9LFxyXG4gIGhhbmRsZUFkZENhcmRTdWJtaXRcclxuKTtcclxubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgfSxcclxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGFzc1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZGVzY3JpcHRpb25TZWxlY3RvcjtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gbmFtZVNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3ByZXZpZXdfaW1hZ2VcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnRUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcHJldmlld190aXRsZVwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlRWxlbWVudFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfY2FyZERlbGV0ZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImdldFZpZXciLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJfZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlZEJ1dHRvbiIsImRpc2FibGVkIiwiZW5hYmxlZEJ1dHRvbiIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dERhdGEiLCJpbnB1dCIsInZhbHVlIiwiZm9ybVZhbHVlcyIsInJlc2V0IiwicHJvZmlsZUVkaXRNb2RhbCIsImFkZENhcmRGb3JtIiwiZm9ybXMiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImNhcmRTZWN0aW9uIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVyQ2FyZCIsImRhdGEiLCJjYXJkRWxlbWVudCIsIkNhcmQiLCJjYXJkRGF0YSIsInBvcHVwV2l0aEltYWdlIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsIl9uYW1lRWxlbWVudCIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsInVzZXJEYXRhIiwiZWRpdFByb2ZpbGVQb3B1cCIsIm5ld0NhcmRQb3B1cCIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiX3ByZXZpZXdJbWFnZUVsZW1lbnQiLCJfcHJldmlld0ltYWdlRWxlbWVudFRpdGxlIiwiaW5wdXREYXRhIiwidGl0bGUiLCJ1cmwiXSwic291cmNlUm9vdCI6IiJ9